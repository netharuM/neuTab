(()=>{var e={634:e=>{class t{constructor(e="BtnCreation"){this.animations=[],this.animation=e}convertTime(e){return e%6e4/1e3}animate(){if(this.animations.length>0)for(;this.animation.length>0;){var e=this.animations[0];if(e.element.style.animation=`${this.animation} ${this.convertTime(e.time)}s`,setTimeout((()=>{e.element.style.animation=""}),e.time),this.animations.shift(),0==this.animations.length)break}}addAnimation(e,t){this.animations.push({element:e,time:t}),this.animate()}}class r{constructor(e,t=".favourites",r=".favouritesBtn",i="a:not(.dragIndicator),button:not(.dragIndicator)"){this.container=document.querySelector(t),this.btnQuery=r,this.favouritesQuery=i,this.dragData={from:null,to:null,calculate:null},this.onDrop=e}createIndicator(e){var t=document.createElement("div");return t.className="dragIndicator",t.addEventListener("dragover",(e=>{e.preventDefault(),t.classList.add("dragover")})),t.addEventListener("dragleave",(e=>{t.classList.remove("dragover")})),t.addEventListener("drop",(r=>{var i={element:t,event:r,elementOwn:e};this.dragData.to=i,this.dragData.from.element.classList.remove("dragging"),this.calculateDrop(),this.onDrop(this.dragData)})),t}calculateDrop(){var e=this.container.querySelectorAll(this.favouritesQuery),t=this.container.querySelectorAll(".dragIndicator");e=Array.from(e),t=Array.from(t),this.dragData.calculate={from:e.indexOf(this.dragData.from.element),to:t.indexOf(this.dragData.to.element),effectedTo:e.indexOf(this.dragData.to.elementOwn)}}addIndicators(){var e=this.container.children;(e=Array.from(e)).forEach(((t,r)=>{t.isEqualNode(this.dragData.from.element)&&r>-1&&e.splice(r,1)})),e.forEach((e=>{var t=this.createIndicator(e);this.container.insertBefore(t,e)}))}removeIndicators(){var e=document.querySelectorAll(".dragIndicator");for(e=Array.from(e);e.length>0;)e[0].remove(),e.shift()}dragStart(e,t){t.classList.add("dragging");var r,i=this.container.querySelectorAll("a:not(.dragging)");(i=Array.from(i)).forEach((e=>{e.style.pointerEvents="none"})),r={element:t,event:e},this.dragData.from=r,this.addIndicators()}dragEnd(e,t){t.classList.remove("dragging");var r=this.container.querySelectorAll("a:not(.dragging)");(r=Array.from(r)).forEach((e=>{e.style.pointerEvents="auto"})),this.removeIndicators()}addToElement(e){e.draggable=!0,e.addEventListener("dragstart",(t=>{this.dragStart(t,e)})),e.addEventListener("dragend",(t=>{this.dragEnd(t,e)}))}}e.exports={favourites:class{constructor(e,i,s='<i class="material-icons" style="margin-left: 5px;">home</i>'){this.root=document.querySelector(":root"),this.favourites=[],this.favBtns=[],this.sync=!0,this.onCreate=e,this.homeIcon=s,this.addBtn=document.getElementById("addFavourite"),this.appName=document.getElementById("appName"),this.newFav=document.getElementById("newFav"),this.favContainer=document.getElementById("favourites"),this.animations=new t("BtnCreation"),this.dragAndDrop=new r((e=>this.move(e))),this.addBtn.addEventListener("mouseover",(()=>{this.appName.innerHTML="Add new Favourite",this.addBtn.onmouseout=()=>{this.appName.innerHTML=this.homeIcon}})),this.addBtn.addEventListener("click",(()=>{this.addNewFavourite()})),this.sync&&this.syncWithChrome()}move(e){var t=e.from.element.title,r=e.from.element.href,i=this.createFavourite(t,r);if(this.dragAndDrop.addToElement(i),this.animations.addAnimation(i,250),e.from.element.remove(),e.to.element.parentNode.insertBefore(i,e.to.element.nextSibling),e.calculate.to>this.favourites.length)for(var s=e.calculate.to-this.favourites.length+1;s--;)this.favourites.push(void 0);this.favourites.splice(e.calculate.to,0,this.favourites.splice(e.calculate.from,1)[0]),chrome.storage.sync.set({favourites:this.favourites})}syncWithChrome(){chrome.storage.sync.get(["favourites"],(e=>{null!=e.favourites?(this.favourites=e.favourites,this.refresh()):null==e.favourites&&chrome.storage.sync.set({favourites:this.favourites})})),chrome.storage.onChanged.addListener(((e,t)=>{for(let[t,{oldValue:r,newValue:i}]of Object.entries(e))"favourites"==t&&(this.favourites=i,this.refresh())}))}refresh(){this.favourites.forEach((e=>{var t=this.createFavourite(e.name,e.link);this.isExist(t)||this.addFavourite(e.name,e.link)})),this.favBtns.forEach((e=>{this.isRemoved(e)&&(e.remove(),this.favBtns.pop(e))}))}isExist(e){for(let t=0;t<this.favBtns.length;t++)if(this.favBtns[t].href==e.href)return!0;return!1}isRemoved(e){var t=[];for(let e=0;e<this.favourites.length;e++)t.push(this.favourites[e].link);var r=e.href;return"/"==r[r.length-1]&&(r=r.substring(0,r.length-1)),t.forEach(((e,r)=>{"/"==e[e.length-1]&&(t[r]=e.substring(0,e.length-1))})),!t.includes(r)}addFavourite(e,t,r=this.sync){if(null==e||null==t||""==e||""==t)throw new Error("name and url are required");var i=this.createFavourite(e,t);this.dragAndDrop.addToElement(i),this.favBtns.push(i),this.favContainer.insertBefore(i,this.addBtn),this.animations.addAnimation(i,450);var s={elementId:i.id,name:e,link:t};return r&&!function(e,t){for(let r=0;r<e.length;r++){const i=e[r];if(i.name==t.name&&i.link==t.link)return!0}return!1}(this.favourites,s)&&(this.favourites.push(s),chrome.storage.sync.set({favourites:this.favourites})),i}createFavourite(e,t){if(null==e||null==t||""==e||""==t)throw new Error("name and url are required");var r=document.createElement("a");r.className="favouritesBtn",r.title=e,r.addEventListener("mouseover",(()=>{this.appName.innerHTML=e,r.onmouseout=()=>{this.appName.innerHTML=this.homeIcon}})),r.setAttribute("href",t),r.id="fav-"+t.split("/")[2];var i=document.createElement("span");r.appendChild(i);var s=document.createElement("img");return s.src=this.favicon(t),s.width="25",s.height="25",i.appendChild(s),i.appendChild(document.createElement("br")),null!=this.onCreate&&this.onCreate(r),r}favicon(e){return"chrome://favicon/size/128@1x/"+e}addNewFavourite(){this.newFav.show(),this.root.style.setProperty("--filter","blur(3px)"),this.root.style.setProperty("--block-index","1"),this.appName.innerHTML="Adding a new favourite";var e=this.newFav.querySelector("#name"),t=this.newFav.querySelector("#url"),r=this.newFav.querySelector("#close"),i=this.newFav.querySelector("#create"),s=()=>{this.newFav.close(),this.root.style.setProperty("--filter","none"),this.root.style.setProperty("--block-index","-2"),o()},n=()=>{this.addFavourite(e.value,t.value),this.newFav.close(),this.root.style.setProperty("--filter","none"),this.root.style.setProperty("--block-index","-2"),e.value="",t.value="",o()},o=()=>{r.removeEventListener("click",s),i.removeEventListener("click",n)};r.addEventListener("click",s),i.addEventListener("click",n)}removeFavourite(e){this.favourites.forEach(((t,r)=>{t.elementId==e.id&&(this.favourites.splice(r,1),e.remove(),1==this.sync?chrome.storage.sync.set({favourites:this.favourites}):this.refresh())}))}}}}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}(()=>{var e=document.createElement("div");e.innerHTML="remove";var t=document.createElement("div");t.innerHTML="notremovetho";const i=new class{constructor(e){this.opened=!1,this.elements=[],this.root=document.querySelector(":root"),this.container=document.querySelector(".contextMenus"),this.contextMenu=document.createElement("div"),this.contextMenu.id="context-menu-test",this.contextMenu.style.display="none",this.contextMenu.className="context-menu",this.menu=e,this.lastClickedElement=void 0,null!=this.menu&&this.menu.forEach((e=>{var t=e.element;t.id=e.id,t.addEventListener("mousedown",(t=>{e.callBack(this.lastClickedElement)}),!1),this.contextMenu.appendChild(t)})),this.container.appendChild(this.contextMenu),document.addEventListener("contextmenu",(e=>{for(let t=0;t<this.elements.length;t++){const r=this.elements[t];if(e.path.includes(r)){e.preventDefault(),this.showMenu(e),this.lastClickedElement=r;break}1==this.opened&&this.hideMenu()}}),!1),document.addEventListener("mousedown",(()=>this.hideMenu()),!1)}addToElement(e){this.elements.push(e)}hideMenu(){this.opened=!1,this.root.style.setProperty("--blocker-context-menu","-2"),this.contextMenu.style.display="none",this.lastClickedElement=void 0}showMenu(e){"none"==this.contextMenu.style.display?(this.opened=!0,this.root.style.setProperty("--blocker-context-menu","0"),this.contextMenu.style.display="block",this.contextMenu.style.left=e.pageX+"px",this.contextMenu.style.top=e.pageY+"px"):(this.opened=!1,this.contextMenu.style.display="none",this.root.style.setProperty("--blocker-context-menu","-2"))}}([{callBack:e=>{o.removeFavourite(e)},element:e,id:"remove"},{callBack:e=>{console.log(e),alert("this is still in development not remove button this time")},element:t,id:"notremove"}]),s=(new class{constructor(e=document.querySelector(".cursor"),t=document.querySelector(".cursor-lazy")){this.cursor=e,this.lazyCursor=t,window.addEventListener("mousemove",(e=>{this.show(),this.editCursor(e)})),window.addEventListener("mousedown",(e=>{this.click(e)}),!1),window.addEventListener("mouseup",(e=>{this.release(e)}),!1),window.addEventListener("mouseout",(e=>{this.hide()}),!1)}editCursor(e){this.cursor.style.left=e.pageX+"px",this.cursor.style.top=e.pageY+"px",this.lazyCursor.style.left=e.pageX+"px",this.lazyCursor.style.top=e.pageY+"px"}click(e){this.lazyCursor.style.width="30px",this.lazyCursor.style.height="30px"}release(e){this.lazyCursor.style.width="45px",this.lazyCursor.style.height="45px"}hide(){this.cursor.style.display="none",this.lazyCursor.style.display="none"}show(){this.cursor.style.display="block",this.lazyCursor.style.display="block"}},new class{constructor(e){this.element=document.getElementById(e),this.refresh(),setInterval((()=>this.refresh()),1e3)}refresh(){this.element.innerHTML=(new Date).toLocaleTimeString()}}("countClock"),new class{constructor(e='<i class="material-icons" style="margin-left: 5px;">home</i>'){this.minimum=5,this.homeIcon=e}setTopSites(e=this.minimum){chrome.topSites.get((t=>{e<this.minimum&&(e=this.minimum),this.removeAllShortcuts();for(var r=0;r<e;r++)this.addShortCut(t[r].url,t[r].title)}))}addShortCut(e,t){var r=document.getElementById("shortcutContainer"),i=document.createElement("a");i.className="shortcutBtn",i.addEventListener("mouseover",(t=>{appName.innerHTML=e.split("/")[2],i.onmouseout=()=>{appName.innerHTML=this.homeIcon}}),!1),i.href=e,i.id="shortcut-"+e.split("/")[2],r.appendChild(i);var s=document.createElement("span");i.appendChild(s);var n=document.createElement("img");n.src=this.getFaviconFromUrl(e),n.alt=t,n.width="25",n.height="25",s.appendChild(n),s.appendChild(document.createElement("br"))}removeAllShortcuts(){console.log("removing all shortcuts");for(var e=document.getElementById("shortcutContainer");e.firstChild;)e.removeChild(e.firstChild)}getFaviconFromUrl(e){return"chrome://favicon/size/128@1x/"+e}}),{favourites:n}=r(634);var o;s.setTopSites(),o=new n((e=>{i.addToElement(e)}))})()})();
//# sourceMappingURL=main.js.map